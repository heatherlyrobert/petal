#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                petal.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (PETAL) verify calculating point data                              0s   data            PETAL__data                                                                  ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG_unit_quiet                                                                                                                   i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   int       d;                                                                                                                                                                                                               
     local    create working variable              - - - - - - - - - - - - -   char      n, i, o;                                                                                                                                                                                                            

   COND       set up testing environment                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     reset touch                          TOUCH_init                                                                                                                        i_equal     0                                                                                                    
     exec     call force                           TOUCH_force_tablet          0     , 0     , 32000 , 32000                                                                         i_equal     0                                                                                                    
     exec     call force                           TOUCH_force_screen          0     , 0     ,  1300 ,   800                                                                         i_equal     0                                                                                                    
     exec     call force                           TOUCH_force_window          400   , 250   ,   200 ,   200, YGLTEX_MIDCEN                                                          i_equal     0                                                                                                    
     get      ... tablet                           TOUCH__unit                 "tablet"      , 0                                                                                     s_equal     TOUCH tablet     :     0x      0y  32000w  32000t           ии         ии     и      иx      иy           
     get      ... screen                           TOUCH__unit                 "screen"      , 0                                                                                     s_equal     TOUCH screen     :     0x      0y   1300w    800t    0.040625x  0.025000y     и      иx      иy           
     get      ... window                           TOUCH__unit                 "window"      , 0                                                                                     s_equal     TOUCH window     :   400x    250y    200w    200t           ии         ии     5      иx      иy           

   COND       verify simple success                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call dot                             DOT_force_beg               0    , 0                                                                                              i_equal     1                                                                                                    
     exec     call data                            PETAL__data                 my.m_x  , my.m_y  , my.m_r  , &d   , &n   , &i   , &o                                                 i_equal     0                                                                                                    
     echo     ... check deg                        - - - - - - - - - - - - -   d                                                                                                     i_equal     0                                                                                                    
     echo     ... check ring                       - - - - - - - - - - - - -   n                                                                                                     i_equal     0                                                                                                    
     echo     ... check inner                      - - - - - - - - - - - - -   i                                                                                                     i_equal     0                                                                                                    
     echo     ... check outer                      - - - - - - - - - - - - -   o                                                                                                     i_equal     1                                                                                                    

   COND       verify straight rightward                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call dot                             DOT_force_beg               0    , 0                                                                                              i_equal     1                                                                                                    
     exec     call dot                             DOT_force_add               40   , 0                                                                                              i_equal     1                                                                                                    
     exec     call data                            PETAL__data                 my.m_x  , my.m_y  , my.m_r  , &d   , &n   , &i   , &o                                                 i_equal     0                                                                                                    
     echo     ... check deg                        - - - - - - - - - - - - -   d                                                                                                     i_equal     0                                                                                                    
     echo     ... check ring                       - - - - - - - - - - - - -   n                                                                                                     i_equal     1                                                                                                    
     echo     ... check inner                      - - - - - - - - - - - - -   i                                                                                                     i_equal     0                                                                                                    
     echo     ... check outer                      - - - - - - - - - - - - -   o                                                                                                     i_equal     1                                                                                                    

   COND       verify straight upward                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call dot                             DOT_force_beg               0    , 0                                                                                              i_equal     1                                                                                                    
     exec     call dot                             DOT_force_add               0    , 60                                                                                             i_equal     1                                                                                                    
     exec     call data                            PETAL__data                 my.m_x  , my.m_y  , my.m_r  , &d   , &n   , &i   , &o                                                 i_equal     0                                                                                                    
     echo     ... check deg                        - - - - - - - - - - - - -   d                                                                                                     i_equal     90                                                                                                   
     echo     ... check ring                       - - - - - - - - - - - - -   n                                                                                                     i_equal     2                                                                                                    
     echo     ... check inner                      - - - - - - - - - - - - -   i                                                                                                     i_equal     4                                                                                                    
     echo     ... check outer                      - - - - - - - - - - - - -   o                                                                                                     i_equal     5                                                                                                    

   COND       verify straight leftward                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call dot                             DOT_force_beg               0    , 0                                                                                              i_equal     1                                                                                                    
     exec     call dot                             DOT_force_add               -80  , 0                                                                                              i_equal     1                                                                                                    
     exec     call data                            PETAL__data                 my.m_x  , my.m_y  , my.m_r  , &d   , &n   , &i   , &o                                                 i_equal     0                                                                                                    
     echo     ... check deg                        - - - - - - - - - - - - -   d                                                                                                     i_equal     180                                                                                                  
     echo     ... check ring                       - - - - - - - - - - - - -   n                                                                                                     i_equal     3                                                                                                    
     echo     ... check inner                      - - - - - - - - - - - - -   i                                                                                                     i_equal     8                                                                                                    
     echo     ... check outer                      - - - - - - - - - - - - -   o                                                                                                     i_equal     9                                                                                                    

   COND       verify straight downward                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call dot                             DOT_force_beg               0    , 0                                                                                              i_equal     1                                                                                                    
     exec     call dot                             DOT_force_add               0    , -85                                                                                            i_equal     1                                                                                                    
     exec     call data                            PETAL__data                 my.m_x  , my.m_y  , my.m_r  , &d   , &n   , &i   , &o                                                 i_equal     0                                                                                                    
     echo     ... check deg                        - - - - - - - - - - - - -   d                                                                                                     i_equal     270                                                                                                  
     echo     ... check ring                       - - - - - - - - - - - - -   n                                                                                                     i_equal     3                                                                                                    
     echo     ... check inner                      - - - - - - - - - - - - -   i                                                                                                     i_equal     12                                                                                                   
     echo     ... check outer                      - - - - - - - - - - - - -   o                                                                                                     i_equal     13                                                                                                   

   COND       verify north-west                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call dot                             DOT_force_beg               0    , 0                                                                                              i_equal     1                                                                                                    
     exec     call dot                             DOT_force_add               -29  , 17                                                                                             i_equal     1                                                                                                    
     exec     call data                            PETAL__data                 my.m_x  , my.m_y  , my.m_r  , &d   , &n   , &i   , &o                                                 i_equal     0                                                                                                    
     echo     ... check deg                        - - - - - - - - - - - - -   d                                                                                                     i_equal     150                                                                                                  
     echo     ... check ring                       - - - - - - - - - - - - -   n                                                                                                     i_equal     1                                                                                                    
     echo     ... check inner                      - - - - - - - - - - - - -   i                                                                                                     i_equal     6                                                                                                    
     echo     ... check outer                      - - - - - - - - - - - - -   o                                                                                                     i_equal     7                                                                                                    

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG_unit_end                                                                                                                     i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (PETAL) verify checking petals                                     0s   check           PETAL__check                                                                 ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG_unit_quiet                                                                                                                   i_equal     0                                                                                                    

   COND       verify initial conditions                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... petal                            PETAL__unit                 "single"      , 0                                                                                     u_round/1   PETAL single (0) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 1                                                                                     u_round/1   PETAL single (1) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 2                                                                                     u_round/1   PETAL single (2) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 3                                                                                     u_round/1   PETAL single (3) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 4                                                                                     u_round/1   PETAL single (4) :    иx     иy       иr     иd     иn   иp                           

   COND       verify starting in ring zero                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call data                            PETAL__check                0    , 0    , 0                                                                                       i_equal     1                                                                                                    
     get      ... petal                            PETAL__unit                 "single"      , 0                                                                                     u_round/1   PETAL single (0) :    0x     0y       0r     0d     0n   0p                           
     get      ... petal                            PETAL__unit                 "single"      , 1                                                                                     u_round/1   PETAL single (1) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 2                                                                                     u_round/1   PETAL single (2) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 3                                                                                     u_round/1   PETAL single (3) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 4                                                                                     u_round/1   PETAL single (4) :    иx     иy       иr     иd     иn   иp                           

   COND       verify another in ring zero                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call data                            PETAL__check                0    , 1    , 1                                                                                       i_equal     0                                                                                                    
     get      ... petal                            PETAL__unit                 "single"      , 0                                                                                     u_round/1   PETAL single (0) :    0x     0y       0r     0d     0n   0p                           
     get      ... petal                            PETAL__unit                 "single"      , 1                                                                                     u_round/1   PETAL single (1) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 2                                                                                     u_round/1   PETAL single (2) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 3                                                                                     u_round/1   PETAL single (3) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 4                                                                                     u_round/1   PETAL single (4) :    иx     иy       иr     иd     иn   иp                           

   COND       verify at ring zero                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call data                            PETAL__check                0    , 27   , 27                                                                                      i_equal     0                                                                                                    
     get      ... petal                            PETAL__unit                 "single"      , 0                                                                                     u_round/1   PETAL single (0) :    0x     0y       0r     0d     0n   0p                           
     get      ... petal                            PETAL__unit                 "single"      , 1                                                                                     u_round/1   PETAL single (1) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 2                                                                                     u_round/1   PETAL single (2) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 3                                                                                     u_round/1   PETAL single (3) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 4                                                                                     u_round/1   PETAL single (4) :    иx     иy       иr     иd     иn   иp                           

   COND       verify just after ring zero                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call data                            PETAL__check                0    , 28   , 28                                                                                      i_equal     1                                                                                                    
     get      ... petal                            PETAL__unit                 "single"      , 0                                                                                     u_round/1   PETAL single (0) :    0x     0y       0r     0d     0n   0p                           
     get      ... petal                            PETAL__unit                 "single"      , 1                                                                                     u_round/1   PETAL single (1) :    0x    28y      28r    90d     1n   4p                           
     get      ... petal                            PETAL__unit                 "single"      , 2                                                                                     u_round/1   PETAL single (2) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 3                                                                                     u_round/1   PETAL single (3) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 4                                                                                     u_round/1   PETAL single (4) :    иx     иy       иr     иd     иn   иp                           

   COND       verify at inner ring                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call data                            PETAL__check                0    , 47   , 47                                                                                      i_equal     0                                                                                                    
     get      ... petal                            PETAL__unit                 "single"      , 0                                                                                     u_round/1   PETAL single (0) :    0x     0y       0r     0d     0n   0p                           
     get      ... petal                            PETAL__unit                 "single"      , 1                                                                                     u_round/1   PETAL single (1) :    0x    28y      28r    90d     1n   4p                           
     get      ... petal                            PETAL__unit                 "single"      , 2                                                                                     u_round/1   PETAL single (2) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 3                                                                                     u_round/1   PETAL single (3) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 4                                                                                     u_round/1   PETAL single (4) :    иx     иy       иr     иd     иn   иp                           

   COND       verify just after inner ring                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call data                            PETAL__check                0    , 48   , 48                                                                                      i_equal     1                                                                                                    
     get      ... petal                            PETAL__unit                 "single"      , 0                                                                                     u_round/1   PETAL single (0) :    0x     0y       0r     0d     0n   0p                           
     get      ... petal                            PETAL__unit                 "single"      , 1                                                                                     u_round/1   PETAL single (1) :    0x    28y      28r    90d     1n   4p                           
     get      ... petal                            PETAL__unit                 "single"      , 2                                                                                     u_round/1   PETAL single (2) :    0x    48y      48r    90d     2n   5p                           
     get      ... petal                            PETAL__unit                 "single"      , 3                                                                                     u_round/1   PETAL single (3) :    иx     иy       иr     иd     иn   иp                           
     get      ... petal                            PETAL__unit                 "single"      , 4                                                                                     u_round/1   PETAL single (4) :    иx     иy       иr     иd     иn   иp                           

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG_unit_end                                                                                                                     i_equal     0                                                                                                    



