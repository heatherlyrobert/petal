#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                petal.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (CONF) verify map field loading                                    0s   load            CONF__load                                                                   ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG_unit_quiet                                                                                                                   i_equal     0                                                                                                    

   COND  (0)  verify default                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... lower                            CONF__unit                  "loaded"      , 0                                                                                     s_equal     CONF loaded  (0) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... upper                            CONF__unit                  "loaded"      , 1                                                                                     s_equal     CONF loaded  (1) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... greek                            CONF__unit                  "loaded"      , 2                                                                                     s_equal     CONF loaded  (2) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... arith                            CONF__unit                  "loaded"      , 3                                                                                     s_equal     CONF loaded  (3) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... logic                            CONF__unit                  "loaded"      , 4                                                                                     s_equal     CONF loaded  (4) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... box drawing                      CONF__unit                  "loaded"      , 5                                                                                     s_equal     CONF loaded  (5) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... macro                            CONF__unit                  "loaded"      , 6                                                                                     s_equal     CONF loaded  (6) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... punct                            CONF__unit                  "loaded"      , 7                                                                                     s_equal     CONF loaded  (7) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 

   COND       verify loading one field                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           CONF_purge                                                                                                                        i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 0           , "a b c d e f g h"      , NULL                               i_equal     0                                                                                                    
     get      ... lower                            CONF__unit                  "loaded"      , 0                                                                                     s_equal     CONF loaded  (0) : åa · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... upper                            CONF__unit                  "loaded"      , 1                                                                                     s_equal     CONF loaded  (1) : åb · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... greek                            CONF__unit                  "loaded"      , 2                                                                                     s_equal     CONF loaded  (2) : åc · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... arith                            CONF__unit                  "loaded"      , 3                                                                                     s_equal     CONF loaded  (3) : åd · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... logic                            CONF__unit                  "loaded"      , 4                                                                                     s_equal     CONF loaded  (4) : åe · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... box drawing                      CONF__unit                  "loaded"      , 5                                                                                     s_equal     CONF loaded  (5) : åf · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... macro                            CONF__unit                  "loaded"      , 6                                                                                     s_equal     CONF loaded  (6) : åg · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... punct                            CONF__unit                  "loaded"      , 7                                                                                     s_equal     CONF loaded  (7) : åh · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 

   COND       attempt to load with NULL and out-of-range                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           CONF_purge                                                                                                                        i_equal     0                                                                                                    
     exec     call load                            CONF__load                  NULL        , "inner"     , 0           , "a b c d e f g h"      , NULL                               i_lesser    0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , -1          , "a b c d e f g h"      , NULL                               i_lesser    0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 6           , "a b c d e f g h"      , NULL                               i_lesser    0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 0           , NULL                   , NULL                               i_lesser    0                                                                                                    

   DITTO (0)  reverify defaults                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify loading one layer                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           CONF_purge                                                                                                                        i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 0           , "· A · · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "NE"        , "inner"     , 0           , "· B · · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "NN"        , "inner"     , 0           , "· C · · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "NW"        , "inner"     , 0           , "· D · · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "WW"        , "inner"     , 0           , "· E · · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "SW"        , "inner"     , 0           , "· F · · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "SS"        , "inner"     , 0           , "· G · · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "SE"        , "inner"     , 0           , "· H · · · · · ·"      , NULL                               i_equal     0                                                                                                    
     get      ... lower                            CONF__unit                  "loaded"      , 0                                                                                     s_equal     CONF loaded  (0) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... upper                            CONF__unit                  "loaded"      , 1                                                                                     s_equal     CONF loaded  (1) : åA · · · · B · · · · C · · · · D · · · · E · · · · F · · · · G · · · · H · · · ·æ 
     get      ... greek                            CONF__unit                  "loaded"      , 2                                                                                     s_equal     CONF loaded  (2) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... arith                            CONF__unit                  "loaded"      , 3                                                                                     s_equal     CONF loaded  (3) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... logic                            CONF__unit                  "loaded"      , 4                                                                                     s_equal     CONF loaded  (4) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... box drawing                      CONF__unit                  "loaded"      , 5                                                                                     s_equal     CONF loaded  (5) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... macro                            CONF__unit                  "loaded"      , 6                                                                                     s_equal     CONF loaded  (6) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... punct                            CONF__unit                  "loaded"      , 7                                                                                     s_equal     CONF loaded  (7) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 

   COND       verify loading petals                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call purge                           CONF_purge                                                                                                                        i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 0           , "· · è · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 1           , "· · é · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 2           , "· · ê · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 3           , "· · ë · · · · ·"      , NULL                               i_equal     0                                                                                                    
     exec     call load                            CONF__load                  "EE"        , "inner"     , 4           , "· · ì · · · · ·"      , NULL                               i_equal     0                                                                                                    
     get      ... lower                            CONF__unit                  "loaded"      , 0                                                                                     s_equal     CONF loaded  (0) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... upper                            CONF__unit                  "loaded"      , 1                                                                                     s_equal     CONF loaded  (1) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... greek                            CONF__unit                  "loaded"      , 2                                                                                     s_equal     CONF loaded  (2) : åè é ê ë ì · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... arith                            CONF__unit                  "loaded"      , 3                                                                                     s_equal     CONF loaded  (3) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... logic                            CONF__unit                  "loaded"      , 4                                                                                     s_equal     CONF loaded  (4) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... box drawing                      CONF__unit                  "loaded"      , 5                                                                                     s_equal     CONF loaded  (5) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... macro                            CONF__unit                  "loaded"      , 6                                                                                     s_equal     CONF loaded  (6) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 
     get      ... punct                            CONF__unit                  "loaded"      , 7                                                                                     s_equal     CONF loaded  (7) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·æ 

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG_unit_end                                                                                                                     i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (CONF) verify loading mapping                                      0s   mapping         CONF_pull, CONF__handle, CONF__mapping                                       ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG_unit_quiet                                                                                                                   i_equal     0                                                                                                    
     local    create working/return variable       - - - - - - - - - - - - -   char      x_name    [LEN_TITLE] = "/tmp/petal.conf";                                                                                                                                                                       

   COND       add file                                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((BB.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create empty file                    yURG_touch                  x_name                                             , "root"    , "root"       , "0600"                i_equal     0                                                                                                    
     file     read for writing                     - - - - - - - - - - - - -   [[ x_name ]]                                                                                                                                                                                                               
     append   ... add a record                     - - - - - - - - - - - - -   DEFAULT   § easy      §                                                                                                                                                                                                    
     append   ... add a record                     - - - - - - - - - - - - -   MAP       § easy      § EE        § · §  a A è 1 · · · ·   §   b B é 2 Û · · ·   §   · · · 3 · · · ·   §   c C ý 4 · · · ·   §   · · · 5 · · · ·   §   T tab             § · §                                                
     append   ... add a record                     - - - - - - - - - - - - -   MAP       § easy      § NE        § · §  d D ë · Ð · · ·   §   e E ì · · · · ·   §   · · · · · · · ·   §   f F ü · · · · ·   §   · · · · · · · ·   §   M mode            § · §                                                
     append   ... add a record                     - - - - - - - - - - - - -   MAP       § easy      § NN        § · §  g G ê · Ñ · · ·   §   h H î · · · · ·   §   · · · · · · · ·   §   i I ð · · · · ·   §   · · · · · · · ·   §   S shift           § · §                                                
     append   ... add a record                     - - - - - - - - - - - - -   MAP       § easy      § NW        § · §  j J · · · · · ·   §   k K ñ · ·  · ·   §   · · · · · · · ·   §   l L ò · · · · ·   §   · · · · · · · ·   §   C control         § · §                                                
     append   ... add a record                     - - - - - - - - - - - - -   MAP       § easy      § WW        § · §  m M ó 0 · · · ·   §   n N ô 6 Ú  · ·   §   · · · 7 · · · ·   §   o O ö 8 · · · ·   §   · · · 9 · · · ·   §   E escape          § · §                                                
     append   ... add a record                     - - - - - - - - - - - - -   MAP       § easy      § SW        § · §  p P ÷ · · · · ·   §   q Q þ · · · ³ ·   §   · · · · · · · ·   §   r R ø · · · · ·   §   · · · · · · · ·   §   A alt             § · §                                                
     append   ... add a record                     - - - - - - - - - - - - -   MAP       § easy      § SS        § · §  s S ù · · · · ·   §   t T ú · · · · ·   §   · · · · · · · ·   §   u U û · · · ª ·   §   · · · · · · · ·   §   N newline         § · §                                                
     append   ... add a record                     - - - - - - - - - - - - -   MAP       § easy      § SE        § · §  v V · · · · · ·   §   w W ÿ · · · · ·   §   x X õ · · · · [   §   y Y ï · · · · ·   §   z Z í · · · · ?   §   H hyper           § · §                                                
     append   ... add a record                     - - - - - - - - - - - - -   # end-of-file.  done, finito, completare, whimper [Ï´···                                                                                                                                                                   
     exec     verify file size                     yURG_peek_count             x_name                                                                                                i_equal     10                                                                                                   

   COND       verify pulling the file                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call pull                            CONF_pull                   x_name                                                                                                i_equal     0                                                                                                    

   COND       verify the results                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... lower                            CONF__unit                  "loaded"      , 0                                                                                     s_equal     CONF loaded  (0) : åa b · c · d e · f · g h · i · j k · l · m n · o · p q · r · s t · u · v w x y zæ 
     get      ... upper                            CONF__unit                  "loaded"      , 1                                                                                     s_equal     CONF loaded  (1) : åA B · C · D E · F · G H · I · J K · L · M N · O · P Q · R · S T · U · V W X Y Zæ 
     get      ... greek                            CONF__unit                  "loaded"      , 2                                                                                     s_equal     CONF loaded  (2) : åè é · ý · ë ì · ü · ê î · ð · · ñ · ò · ó ô · ö · ÷ þ · ø · ù ú · û · · ÿ õ ï íæ 
     get      ... arith                            CONF__unit                  "loaded"      , 3                                                                                     s_equal     CONF loaded  (3) : å1 2 3 4 5 · · · · · · · · · · · · · · · 0 6 7 8 9 · · · · · · · · · · · · · · ·æ 
     get      ... logic                            CONF__unit                  "loaded"      , 4                                                                                     s_equal     CONF loaded  (4) : å· Û · · · Ð · · · · Ñ · · · · · · · · · · Ú · · · · · · · · · · · · · · · · · ·æ 
     get      ... box drawing                      CONF__unit                  "loaded"      , 5                                                                                     s_equal     CONF loaded  (5) : å· · · · · · · · · · · · · · · ·  · · · ·  · · · · · · · · · · · · · · · · · ·æ 
     get      ... macro                            CONF__unit                  "loaded"      , 6                                                                                     s_equal     CONF loaded  (6) : å· · · · · · · · · · · · · · · · · · · · · · · · · · ³ · · · · · · ª · · · · · ·æ 
     get      ... punct                            CONF__unit                  "loaded"      , 7                                                                                     s_equal     CONF loaded  (7) : å· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · [ · ?æ 

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG_unit_end                                                                                                                     i_equal     0                                                                                                    


